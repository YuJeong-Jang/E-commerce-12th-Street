// 플러그인 설정
plugins {
    id 'war'
    id 'application' // ./gradlew run 을 실행하기 위함
    id 'org.gretty' version '4.0.3' // Gretty 플러그인 추가
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}


// 라이브러리 다운로드 저장소
repositories {
    mavenCentral()
    gradlePluginPortal()
}

// 의존성(라이브러리) 목록
dependencies {
    compileOnly 'jakarta.servlet:jakarta.servlet-api:6.0.0'  // providedCompile → compileOnly (deprecated)
    compileOnly 'jakarta.servlet.jsp:jakarta.servlet.jsp-api:4.0.0'
    implementation 'jakarta.servlet.jsp.jstl:jakarta.servlet.jsp.jstl-api:3.0.0'
    implementation 'org.glassfish.web:jakarta.servlet.jsp.jstl:3.0.0'
    implementation 'com.mysql:mysql-connector-j:8.0.33' // MySQL 드라이버
    implementation 'org.mindrot:jbcrypt:0.4' // 비밀번호 암호화
}


tasks.withType(JavaCompile) {
    options.release = 17 
    options.encoding = 'UTF-8'
}


gretty {
    contextPath = '/'    // 웹사이트 주소를 http://localhost:8080/ 로 설정
    httpPort = 8080      // 8080 포트 사용
    servletContainer = 'tomcat10'  // Tomcat 10 (jakarta 호환)
    scanInterval = 1000  // 1초마다 변경 감지 (hot reload)
}

war {
    archiveFileName = 'ROOT.war'  // WAR 이름 설정
}